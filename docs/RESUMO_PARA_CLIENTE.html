<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biohelp LRP â€” Resumo Executivo</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #ffffff;
            --bg-secondary: #f7f6f3;
            --bg-hover: #efefef;
            --text: #37352f;
            --text-secondary: #6b6b6b;
            --text-light: #9b9a97;
            --border: #e3e2de;
            --accent: #2eaadc;
            --green: #0f7b6c;
            --green-bg: #dbeddb;
            --yellow: #dfab01;
            --yellow-bg: #fdecc8;
            --red: #e03e3e;
            --red-bg: #ffe2dd;
            --blue: #0b6e99;
            --blue-bg: #d3e5ef;
            --purple: #6940a5;
            --purple-bg: #e8deee;
            --gray-bg: #ebeced;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            font-size: 16px;
        }
        .page { max-width: 900px; margin: 0 auto; padding: 80px 96px; }
        @media (max-width: 768px) { .page { padding: 40px 24px; } }
        .page-header { margin-bottom: 48px; }
        .page-icon { font-size: 78px; margin-bottom: 16px; }
        h1.page-title { font-size: 40px; font-weight: 700; letter-spacing: -0.02em; margin-bottom: 8px; }
        .page-description { color: var(--text-secondary); font-size: 16px; }
        .status-inline {
            display: inline-flex; align-items: center; gap: 6px;
            background: var(--green-bg); color: var(--green);
            padding: 3px 8px; border-radius: 3px; font-size: 14px; font-weight: 500; margin-left: 8px;
        }
        h1 { font-size: 30px; font-weight: 600; margin: 48px 0 16px; letter-spacing: -0.01em; }
        h2 { font-size: 24px; font-weight: 600; margin: 40px 0 12px; letter-spacing: -0.01em; }
        h3 { font-size: 20px; font-weight: 600; margin: 32px 0 8px; }
        h4 { font-size: 16px; font-weight: 600; margin: 24px 0 8px; }
        p { margin: 8px 0; color: var(--text); }
        a { color: var(--text); text-decoration: underline; text-decoration-color: var(--border); text-underline-offset: 2px; }
        a:hover { text-decoration-color: var(--text); }
        hr { border: none; border-top: 1px solid var(--border); margin: 32px 0; }
        .progress-section { margin: 24px 0; }
        .progress-item { display: flex; align-items: center; gap: 16px; padding: 8px 0; }
        .progress-label { width: 200px; font-size: 14px; color: var(--text); }
        .progress-bar { flex: 1; height: 8px; background: var(--bg-secondary); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--green); border-radius: 4px; }
        .progress-fill.pending { background: var(--border); }
        .progress-value { width: 70px; text-align: right; font-size: 14px; color: var(--text-secondary); }
        .callout { display: flex; gap: 12px; padding: 16px; border-radius: 4px; margin: 16px 0; }
        .callout-icon { font-size: 20px; flex-shrink: 0; }
        .callout-content { flex: 1; }
        .callout.gray { background: var(--gray-bg); }
        .callout.yellow { background: var(--yellow-bg); }
        .callout.green { background: var(--green-bg); }
        .callout.blue { background: var(--blue-bg); }
        .callout.red { background: var(--red-bg); }
        .callout.purple { background: var(--purple-bg); }
        table { width: 100%; border-collapse: collapse; margin: 16px 0; font-size: 14px; }
        th { text-align: left; padding: 8px 12px; background: var(--bg-secondary); font-weight: 500; color: var(--text-secondary); border: 1px solid var(--border); }
        td { padding: 8px 12px; border: 1px solid var(--border); vertical-align: top; }
        tr:hover td { background: var(--bg-secondary); }
        .tag { display: inline-block; padding: 2px 6px; border-radius: 3px; font-size: 12px; font-weight: 500; }
        .tag.green { background: var(--green-bg); color: var(--green); }
        .tag.yellow { background: var(--yellow-bg); color: var(--yellow); }
        .tag.red { background: var(--red-bg); color: var(--red); }
        .tag.blue { background: var(--blue-bg); color: var(--blue); }
        .tag.gray { background: var(--gray-bg); color: var(--text-secondary); }
        code { font-family: 'IBM Plex Mono', monospace; background: var(--bg-secondary); padding: 2px 5px; border-radius: 3px; font-size: 14px; color: var(--red); }
        pre { font-family: 'IBM Plex Mono', monospace; background: var(--bg-secondary); padding: 16px; border-radius: 4px; overflow-x: auto; font-size: 12px; line-height: 1.4; margin: 16px 0; white-space: pre-wrap; }
        pre code { background: none; padding: 0; color: var(--text); }
        details { margin: 8px 0; border: 1px solid var(--border); border-radius: 4px; }
        summary { cursor: pointer; padding: 12px 16px; font-weight: 500; list-style: none; display: flex; align-items: center; gap: 8px; background: var(--bg-secondary); }
        summary::before { content: 'â–¶'; font-size: 10px; color: var(--text-light); transition: transform 0.2s; }
        details[open] summary::before { transform: rotate(90deg); }
        summary::-webkit-details-marker { display: none; }
        details > .content { padding: 16px; }
        .toc { margin: 24px 0; }
        .toc-item { display: block; padding: 6px 0; color: var(--text-secondary); text-decoration: none; font-size: 14px; border-radius: 3px; transition: background 0.1s; }
        .toc-item:hover { color: var(--text); background: var(--bg-hover); padding-left: 8px; }
        .checklist { list-style: none; margin: 8px 0; }
        .checklist li { display: flex; align-items: flex-start; gap: 8px; padding: 4px 0; font-size: 15px; }
        .checklist li::before { content: 'â˜‘'; color: var(--green); font-size: 16px; }
        ul.bullet { list-style: none; margin: 8px 0; }
        ul.bullet li { position: relative; padding-left: 24px; margin: 4px 0; }
        ul.bullet li::before { content: 'â€¢'; position: absolute; left: 8px; color: var(--text-light); }
        ol.numbered { list-style: none; counter-reset: item; margin: 8px 0; }
        ol.numbered li { position: relative; padding-left: 32px; margin: 6px 0; counter-increment: item; }
        ol.numbered li::before { content: counter(item) "."; position: absolute; left: 8px; color: var(--text-light); font-weight: 500; }
        .columns { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 24px; margin: 16px 0; }
        .column { padding: 16px; background: var(--bg-secondary); border-radius: 4px; }
        .column h4 { font-size: 14px; font-weight: 600; margin-bottom: 8px; }
        .diagram { background: var(--bg-secondary); border-radius: 4px; padding: 20px; margin: 16px 0; overflow-x: auto; }
        .diagram pre { background: none; padding: 0; margin: 0; font-size: 11px; line-height: 1.3; }
        .page-footer { margin-top: 64px; padding-top: 24px; border-top: 1px solid var(--border); color: var(--text-light); font-size: 13px; text-align: center; }
        .test-table th:last-child, .test-table td:last-child { text-align: center; width: 80px; }
        .fr-table { font-size: 13px; }
        .fr-table td:first-child { font-weight: 500; white-space: nowrap; }
    </style>
</head>
<body>
    <div class="page">
        <!-- Header -->
        <header class="page-header">
            <div class="page-icon">ğŸ“Š</div>
            <h1 class="page-title">Biohelp LRP<span class="status-inline">Sprint 5 âœ“</span></h1>
            <p class="page-description">Resumo Executivo do Projeto â€¢ Ãšltima atualizaÃ§Ã£o: 20/01/2026</p>
        </header>

        <!-- Progress -->
        <section class="progress-section">
            <div class="progress-item">
                <span class="progress-label">Sprint 1 â€” MVP</span>
                <div class="progress-bar"><div class="progress-fill" style="width: 100%"></div></div>
                <span class="progress-value">100% âœ“</span>
            </div>
            <div class="progress-item">
                <span class="progress-label">Sprint 2 â€” CV + Status</span>
                <div class="progress-bar"><div class="progress-fill" style="width: 100%"></div></div>
                <span class="progress-value">100% âœ“</span>
            </div>
            <div class="progress-item">
                <span class="progress-label">Sprint 3 â€” Rede Visual</span>
                <div class="progress-bar"><div class="progress-fill" style="width: 100%"></div></div>
                <span class="progress-value">100% âœ“</span>
            </div>
            <div class="progress-item">
                <span class="progress-label">Sprint 4 â€” ComissÃµes</span>
                <div class="progress-bar"><div class="progress-fill" style="width: 100%"></div></div>
                <span class="progress-value">100% âœ“</span>
            </div>
            <div class="progress-item">
                <span class="progress-label">Sprint 5 â€” Saques</span>
                <div class="progress-bar"><div class="progress-fill" style="width: 83%"></div></div>
                <span class="progress-value">83% âœ“</span>
            </div>
            <div class="progress-item">
                <span class="progress-label">Sprint 6 â€” Admin</span>
                <div class="progress-bar"><div class="progress-fill" style="width: 100%"></div></div>
                <span class="progress-value">100% âœ“</span>
            </div>
            <div class="progress-item">
                <span class="progress-label">Sprint 7 â€” Creatina</span>
                <div class="progress-bar"><div class="progress-fill" style="width: 85%; background: var(--yellow)"></div></div>
                <span class="progress-value">85% âš ï¸</span>
            </div>
        </section>

        <!-- Cobertura FRs -->
        <h3>Cobertura de Requisitos Funcionais (FRs)</h3>
        <table>
            <thead><tr><th>Categoria</th><th>Total</th><th>âœ…</th><th>âš ï¸</th><th>â³</th><th>%</th></tr></thead>
            <tbody>
                <tr><td>Identidade/Acesso</td><td>3</td><td>3</td><td>0</td><td>0</td><td>100%</td></tr>
                <tr><td>Cadastro/IndicaÃ§Ã£o</td><td>5</td><td>4</td><td>0</td><td>1</td><td>80%</td></tr>
                <tr><td>Rede/VisualizaÃ§Ã£o</td><td>4</td><td>4</td><td>0</td><td>0</td><td>100%</td></tr>
                <tr><td>CV/Status</td><td>5</td><td>4</td><td>1</td><td>0</td><td>90%</td></tr>
                <tr><td>NÃ­veis</td><td>3</td><td>3</td><td>0</td><td>0</td><td>100%</td></tr>
                <tr><td>ComissÃµes</td><td>7</td><td>7</td><td>0</td><td>0</td><td>100%</td></tr>
                <tr><td>Saques</td><td>6</td><td>5</td><td>1</td><td>0</td><td>92%</td></tr>
                <tr><td>Admin</td><td>5</td><td>5</td><td>0</td><td>0</td><td>100%</td></tr>
                <tr style="font-weight: 600; background: var(--blue-bg);"><td>TOTAL</td><td>38</td><td>35</td><td>2</td><td>1</td><td>95%</td></tr>
            </tbody>
        </table>

        <hr>

        <!-- TOC -->
        <nav class="toc">
            <a class="toc-item" href="#sprint1">ğŸš€ Sprint 1 â€” MVP Operacional</a>
            <a class="toc-item" href="#sprint2">ğŸ“Š Sprint 2 â€” CV + Status</a>
            <a class="toc-item" href="#sprint3">ğŸŒ Sprint 3 â€” Rede Visual + NÃ­veis</a>
            <a class="toc-item" href="#sprint4">ğŸ’° Sprint 4 â€” ComissÃµes + Ledger</a>
            <a class="toc-item" href="#sprint5">ğŸ’¸ Sprint 5 â€” Saques + Fiscal</a>
            <a class="toc-item" href="#futuro">ğŸ”® Sprints Futuros</a>
            <a class="toc-item" href="#testar">ğŸ§ª Como Testar</a>
            <a class="toc-item" href="#tbd">ğŸ“‹ DecisÃµes Pendentes</a>
        </nav>

        <hr>

        <!-- Sprint 1 -->
        <section id="sprint1">
            <h1>ğŸš€ Sprint 1 â€” MVP Operacional âœ…</h1>
            <p><strong>Data de conclusÃ£o:</strong> 07/01/2026 | <strong>FRs cobertos:</strong> FR-01 a FR-09</p>

            <h3>O que foi entregue</h3>
            <table>
                <thead><tr><th>#</th><th>Funcionalidade</th><th>FR</th><th>Status</th><th>DescriÃ§Ã£o</th></tr></thead>
                <tbody>
                    <tr><td>1</td><td>Cadastro com link</td><td>FR-04, FR-05</td><td><span class="tag green">âœ“</span></td><td>Cliente recebe link e se cadastra</td></tr>
                    <tr><td>2</td><td>AutenticaÃ§Ã£o membro</td><td>FR-01</td><td><span class="tag green">âœ“</span></td><td>Login/logout via Supabase Auth</td></tr>
                    <tr><td>3</td><td>AutenticaÃ§Ã£o admin</td><td>FR-02</td><td><span class="tag green">âœ“</span></td><td>Login com role admin</td></tr>
                    <tr><td>4</td><td>Controle de permissÃµes</td><td>FR-03</td><td><span class="tag green">âœ“</span></td><td>RLS ativo no banco</td></tr>
                    <tr><td>5</td><td>Dashboard do membro</td><td>FR-01</td><td><span class="tag green">âœ“</span></td><td>Painel com dados e link de convite</td></tr>
                    <tr><td>6</td><td>Painel administrativo</td><td>FR-02</td><td><span class="tag green">âœ“</span></td><td>Lista, busca e gerencia membros</td></tr>
                    <tr><td>7</td><td>IntegraÃ§Ã£o Shopify</td><td>FR-04, FR-08</td><td><span class="tag green">âœ“</span></td><td>Cria/atualiza customer com tags</td></tr>
                    <tr><td>8</td><td>GeraÃ§Ã£o de link Ãºnico</td><td>FR-07</td><td><span class="tag green">âœ“</span></td><td>ref_code Ãºnico e imutÃ¡vel</td></tr>
                    <tr><td>9</td><td>PersistÃªncia da rede</td><td>FR-09</td><td><span class="tag green">âœ“</span></td><td>sponsor_id vincula hierarquia</td></tr>
                </tbody>
            </table>

            <details>
                <summary>ğŸ“‹ Fluxo de Funcionamento â€” Cadastro</summary>
                <div class="content">
                    <div class="diagram">
<pre>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FLUXO DE CADASTRO (Sprint 1)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1ï¸âƒ£ PARCEIRA COMPARTILHA LINK
   â”‚  Exemplo: https://rlp-biohelp.vercel.app/join?ref=ABC123
   â–¼
2ï¸âƒ£ CLIENTE ACESSA O LINK
   â”‚  Sistema captura o ref_code (ABC123) da URL
   â”‚  Sistema busca o sponsor pelo ref_code
   â–¼
3ï¸âƒ£ CLIENTE PREENCHE FORMULÃRIO
   â”‚  Campos: Nome, Email, Senha
   â–¼
4ï¸âƒ£ SISTEMA VALIDA DADOS
   â”‚  âœ“ Email Ãºnico? (nÃ£o pode existir)
   â”‚  âœ“ Sponsor existe? (ref_code vÃ¡lido)
   â”‚  âœ“ Senha forte?
   â–¼
5ï¸âƒ£ SISTEMA CRIA MEMBRO NO SUPABASE
   â”‚  â”œâ”€â”€ Cria usuÃ¡rio no Supabase Auth
   â”‚  â”œâ”€â”€ Cria registro na tabela `members`
   â”‚  â”‚   â”œâ”€â”€ id: UUID gerado
   â”‚  â”‚   â”œâ”€â”€ name: nome do cliente
   â”‚  â”‚   â”œâ”€â”€ email: email do cliente
   â”‚  â”‚   â”œâ”€â”€ ref_code: cÃ³digo Ãºnico gerado (ex: XYZ789)
   â”‚  â”‚   â”œâ”€â”€ sponsor_id: UUID do sponsor (quem indicou)
   â”‚  â”‚   â””â”€â”€ status: 'pending'
   â”‚  â”œâ”€â”€ Cria registro em `referral_events` (histÃ³rico)
   â”‚  â””â”€â”€ Cria registro em `shopify_customers` (status: pending)
   â–¼
6ï¸âƒ£ SISTEMA SINCRONIZA COM SHOPIFY
   â”‚  Mutation GraphQL: customerSet
   â”‚  â”œâ”€â”€ Cria/atualiza Customer por email
   â”‚  â””â”€â”€ Aplica tags:
   â”‚      â”œâ”€â”€ lrp_member (identifica como membro LRP)
   â”‚      â”œâ”€â”€ lrp_ref:XYZ789 (cÃ³digo do novo membro)
   â”‚      â”œâ”€â”€ lrp_sponsor:ABC123 (cÃ³digo de quem indicou)
   â”‚      â””â”€â”€ lrp_status:pending (status inicial)
   â–¼
7ï¸âƒ£ SISTEMA REDIRECIONA PARA DASHBOARD
   â”‚  Membro vÃª: Seu nome, email, link de convite, sponsor, status
   â–¼
8ï¸âƒ£ MEMBRO PODE COMPRAR COM PREÃ‡O DE MEMBRO
   â””â”€â”€ Na loja Shopify, o sistema reconhece a tag lrp_member</pre>
                    </div>
                </div>
            </details>

            <details>
                <summary>ğŸ—ï¸ Diagrama de Arquitetura</summary>
                <div class="content">
                    <div class="diagram">
<pre>    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   CLIENTE    â”‚â”€â”€â”€â”€â–¶â”‚   SISTEMA    â”‚â”€â”€â”€â”€â–¶â”‚   SHOPIFY    â”‚
    â”‚  (Browser)   â”‚     â”‚  (Next.js)   â”‚     â”‚  (Customer)  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                    â”‚                    â”‚
           â”‚  1. Acessa link    â”‚                    â”‚
           â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚                    â”‚
           â”‚  2. Preenche form  â”‚                    â”‚
           â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  â”‚                    â”‚
           â”‚                    â”‚  3. Cria Customer  â”‚
           â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
           â”‚                    â”‚  4. Aplica Tags    â”‚
           â”‚                    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
           â”‚  5. Dashboard      â”‚                    â”‚
           â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚                    â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   SUPABASE   â”‚â—€â”€â”€â”€â”€â”‚   SISTEMA    â”‚
    â”‚  (Auth+DB)   â”‚     â”‚  (Backend)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</pre>
                    </div>
                </div>
            </details>

            <details>
                <summary>ğŸ§ª Testes Realizados e Resultados</summary>
                <div class="content">
                    <h4>CenÃ¡rio 1: Cadastro com link vÃ¡lido âœ…</h4>
                    <table class="test-table">
                        <thead><tr><th>Passo</th><th>AÃ§Ã£o</th><th>Resultado Esperado</th><th>Status</th></tr></thead>
                        <tbody>
                            <tr><td>1</td><td>Acessar /join?ref=SPONSOR01</td><td>PÃ¡gina de cadastro carrega</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>2</td><td>Preencher nome, email, senha</td><td>FormulÃ¡rio aceita dados</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>3</td><td>Clicar em "Cadastrar"</td><td>Processamento inicia</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>4</td><td>Verificar Supabase</td><td>Registro em members criado</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>5</td><td>Verificar Shopify Admin</td><td>Customer existe com tags</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>6</td><td>Verificar redirect</td><td>Dashboard carrega</td><td><span class="tag green">âœ“</span></td></tr>
                        </tbody>
                    </table>

                    <h4>CenÃ¡rio 2: Email duplicado âœ…</h4>
                    <table class="test-table">
                        <thead><tr><th>Passo</th><th>AÃ§Ã£o</th><th>Resultado Esperado</th><th>Status</th></tr></thead>
                        <tbody>
                            <tr><td>1</td><td>Tentar cadastrar email existente</td><td>Erro 409</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>2</td><td>Mensagem exibida</td><td>"Email jÃ¡ cadastrado"</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>3</td><td>Shopify</td><td>NÃ£o cria duplicado</td><td><span class="tag green">âœ“</span></td></tr>
                        </tbody>
                    </table>

                    <h4>CenÃ¡rio 3: Falha Shopify + RecuperaÃ§Ã£o âœ…</h4>
                    <table class="test-table">
                        <thead><tr><th>Passo</th><th>AÃ§Ã£o</th><th>Resultado Esperado</th><th>Status</th></tr></thead>
                        <tbody>
                            <tr><td>1</td><td>Simular falha Shopify</td><td>Membro criado mesmo assim</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>2</td><td>Verificar shopify_customers</td><td>status = 'failed'</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>3</td><td>Admin executa "Resync"</td><td>Customer criado no Shopify</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>4</td><td>Verificar shopify_customers</td><td>status = 'ok'</td><td><span class="tag green">âœ“</span></td></tr>
                        </tbody>
                    </table>
                </div>
            </details>

            <h3>Banco de Dados Criado</h3>
            <table>
                <thead><tr><th>Tabela</th><th>DescriÃ§Ã£o</th><th>Campos principais</th></tr></thead>
                <tbody>
                    <tr><td><code>members</code></td><td>Cadastro de membros</td><td>id, name, email, ref_code, sponsor_id, status</td></tr>
                    <tr><td><code>referral_events</code></td><td>HistÃ³rico de indicaÃ§Ãµes</td><td>member_id, ref_code_used, utm_json</td></tr>
                    <tr><td><code>shopify_customers</code></td><td>Rastreamento de sync</td><td>member_id, shopify_customer_id, last_sync_status</td></tr>
                    <tr><td><code>roles</code></td><td>Controle de permissÃµes</td><td>member_id, role (member/admin)</td></tr>
                </tbody>
            </table>
        </section>

        <hr>

        <!-- Sprint 2 -->
        <section id="sprint2">
            <h1>ğŸ“Š Sprint 2 â€” CV + Status âœ…</h1>
            <p><strong>Data de conclusÃ£o:</strong> 08/01/2026 | <strong>FRs cobertos:</strong> FR-13, FR-14, FR-15, FR-16</p>

            <h3>O que foi entregue</h3>
            <table>
                <thead><tr><th>#</th><th>Funcionalidade</th><th>FR</th><th>Status</th><th>DescriÃ§Ã£o</th></tr></thead>
                <tbody>
                    <tr><td>1</td><td>Webhooks Shopify</td><td>FR-13</td><td><span class="tag green">âœ“</span></td><td>Recebe eventos de pedidos</td></tr>
                    <tr><td>2</td><td>CÃ¡lculo de CV</td><td>FR-14</td><td><span class="tag green">âœ“</span></td><td>CV por produto via metafield</td></tr>
                    <tr><td>3</td><td>Status automÃ¡tico</td><td>FR-15</td><td><span class="tag green">âœ“</span></td><td>Ativo se CV >= 200/mÃªs</td></tr>
                    <tr><td>4</td><td>Dashboard com CV</td><td>FR-14</td><td><span class="tag green">âœ“</span></td><td>Progresso visual da meta</td></tr>
                    <tr><td>5</td><td>HistÃ³rico de CV</td><td>FR-14</td><td><span class="tag green">âœ“</span></td><td>Meses anteriores</td></tr>
                    <tr><td>6</td><td>Job mensal</td><td>FR-16</td><td><span class="tag green">âœ“</span></td><td>Fechamento automÃ¡tico</td></tr>
                    <tr><td>7</td><td>Ajuste manual</td><td>FR-14</td><td><span class="tag green">âœ“</span></td><td>Admin pode ajustar CV</td></tr>
                </tbody>
            </table>

            <div class="callout yellow">
                <span class="callout-icon">âš ï¸</span>
                <div class="callout-content">
                    <strong>CV Ã© definido por PRODUTO, NÃƒO pelo preÃ§o!</strong>
                    <p style="margin-top: 8px;">Cada produto tem um CV especÃ­fico configurado via metafield no Shopify.</p>
                    <p>Exemplo: Lemon Dreams custa R$159 mas tem CV = 77</p>
                    <p><strong>CV do pedido = Î£(CV_do_produto Ã— quantidade)</strong></p>
                </div>
            </div>

            <details>
                <summary>ğŸ“‹ Fluxo de Funcionamento â€” Compra â†’ CV</summary>
                <div class="content">
                    <div class="diagram">
<pre>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FLUXO DE COMPRA â†’ CV (Sprint 2)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1ï¸âƒ£ MEMBRO FAZ COMPRA NA LOJA SHOPIFY
   â”‚  Usa o email cadastrado no LRP
   â”‚  Compra produtos (ex: Lemon Dreams R$159)
   â–¼
2ï¸âƒ£ SHOPIFY PROCESSA PAGAMENTO
   â”‚  Pedido muda para status "paid"
   â”‚  Shopify dispara webhook
   â–¼
3ï¸âƒ£ WEBHOOK CHEGA NO SISTEMA
   â”‚  POST /api/webhooks/shopify/orders/paid
   â”‚  Payload: dados completos do pedido
   â–¼
4ï¸âƒ£ SISTEMA VALIDA WEBHOOK
   â”‚  âœ“ Assinatura HMAC vÃ¡lida?
   â”‚  âœ“ DomÃ­nio da loja correto?
   â”‚  âœ“ Pedido jÃ¡ processado? (idempotÃªncia)
   â–¼
5ï¸âƒ£ SISTEMA IDENTIFICA MEMBRO
   â”‚  Busca membro pelo email do pedido
   â”‚  Se nÃ£o encontrar â†’ ignora (nÃ£o Ã© membro LRP)
   â–¼
6ï¸âƒ£ SISTEMA CALCULA CV DO PEDIDO
   â”‚  Para cada item do pedido:
   â”‚  â”œâ”€â”€ Busca CV no metafield do produto (ex: Lemon Dreams â†’ CV = 77)
   â”‚  â””â”€â”€ CV_item = CV_produto Ã— quantidade
   â”‚  CV_pedido = Î£(CV_item)
   â–¼
7ï¸âƒ£ SISTEMA REGISTRA NO BANCO
   â”‚  â”œâ”€â”€ Cria registro em `orders`
   â”‚  â”œâ”€â”€ Cria registros em `order_items`
   â”‚  â”œâ”€â”€ Cria entradas no `cv_ledger`
   â”‚  â””â”€â”€ Atualiza `members.current_cv_month`
   â–¼
8ï¸âƒ£ SISTEMA VERIFICA STATUS
   â”‚  Se CV_mensal >= 200: Status = "active" âœ…
   â”‚  Se CV_mensal < 200: Status = "inactive" ou "pending"
   â–¼
9ï¸âƒ£ SISTEMA ATUALIZA SHOPIFY
   â””â”€â”€ Atualiza tag do Customer: lrp_status:active (ou inactive)</pre>
                    </div>
                </div>
            </details>

            <details>
                <summary>ğŸ”„ Fluxo de Refund/Cancelamento</summary>
                <div class="content">
                    <div class="diagram">
<pre>1ï¸âƒ£ ADMIN FAZ REFUND NO SHOPIFY
   â–¼
2ï¸âƒ£ SHOPIFY DISPARA WEBHOOK
   â”‚  POST /api/webhooks/shopify/orders/refunded (ou /cancelled)
   â–¼
3ï¸âƒ£ SISTEMA PROCESSA REVERSÃƒO
   â”‚  â”œâ”€â”€ Busca pedido original
   â”‚  â”œâ”€â”€ Cria entradas NEGATIVAS no cv_ledger
   â”‚  â””â”€â”€ Recalcula CV mensal do membro
   â–¼
4ï¸âƒ£ SISTEMA VERIFICA NOVO STATUS
   â”‚  Se CV_mensal < 200 apÃ³s reversÃ£o: Status muda para "inactive"
   â–¼
5ï¸âƒ£ SISTEMA ATUALIZA SHOPIFY
   â””â”€â”€ Atualiza tag: lrp_status:inactive</pre>
                    </div>
                </div>
            </details>

            <details>
                <summary>ğŸ“… Fluxo de Fechamento Mensal</summary>
                <div class="content">
                    <div class="diagram">
<pre>â° EXECUÃ‡ÃƒO: 1Âº dia do mÃªs Ã s 03:00 UTC (00:00 BRT)
   â”‚  Cron job: /api/cron/close-monthly-cv
   â–¼
Para cada membro:
   â”‚
   â”œâ”€â”€ 1ï¸âƒ£ Calcula CV do mÃªs anterior (soma do cv_ledger do mÃªs)
   â”œâ”€â”€ 2ï¸âƒ£ Determina status final: >= 200 â†’ active | < 200 â†’ inactive
   â”œâ”€â”€ 3ï¸âƒ£ Cria/atualiza cv_monthly_summary
   â”œâ”€â”€ 4ï¸âƒ£ Reseta CV para novo mÃªs: members.current_cv_month = 0
   â””â”€â”€ 5ï¸âƒ£ Atualiza tag no Shopify (se mudou)</pre>
                    </div>
                </div>
            </details>

            <details>
                <summary>ğŸ§ª Testes Realizados e Resultados</summary>
                <div class="content">
                    <h4>CenÃ¡rio 1: Pedido pago gera CV âœ…</h4>
                    <table class="test-table">
                        <thead><tr><th>Passo</th><th>AÃ§Ã£o</th><th>Resultado Esperado</th><th>Status</th></tr></thead>
                        <tbody>
                            <tr><td>1</td><td>Fazer pedido na loja</td><td>Webhook disparado</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>2</td><td>Verificar orders</td><td>Registro criado com total_cv</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>3</td><td>Verificar cv_ledger</td><td>Entradas com cv_type 'order_paid'</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>4</td><td>Verificar Dashboard</td><td>CV atualizado</td><td><span class="tag green">âœ“</span></td></tr>
                        </tbody>
                    </table>

                    <h4>CenÃ¡rio 2: Refund reverte CV âœ…</h4>
                    <table class="test-table">
                        <thead><tr><th>Passo</th><th>AÃ§Ã£o</th><th>Resultado Esperado</th><th>Status</th></tr></thead>
                        <tbody>
                            <tr><td>1</td><td>Reembolsar pedido</td><td>Webhook disparado</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>2</td><td>Verificar cv_ledger</td><td>Entradas negativas</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>3</td><td>Verificar CV do membro</td><td>CV diminuiu</td><td><span class="tag green">âœ“</span></td></tr>
                        </tbody>
                    </table>

                    <h4>CenÃ¡rio 3: IdempotÃªncia âœ…</h4>
                    <table class="test-table">
                        <thead><tr><th>Passo</th><th>AÃ§Ã£o</th><th>Resultado Esperado</th><th>Status</th></tr></thead>
                        <tbody>
                            <tr><td>1</td><td>Enviar mesmo webhook 2x</td><td>Apenas 1 registro</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>2</td><td>Verificar CV</td><td>NÃ£o duplicou</td><td><span class="tag green">âœ“</span></td></tr>
                        </tbody>
                    </table>
                </div>
            </details>

            <h3>Banco de Dados Criado</h3>
            <table>
                <thead><tr><th>Tabela</th><th>DescriÃ§Ã£o</th><th>Campos principais</th></tr></thead>
                <tbody>
                    <tr><td><code>orders</code></td><td>Espelho dos pedidos Shopify</td><td>shopify_order_id, member_id, total_cv, status</td></tr>
                    <tr><td><code>order_items</code></td><td>Itens dos pedidos</td><td>order_id, title, quantity, price, cv_value</td></tr>
                    <tr><td><code>cv_ledger</code></td><td>Ledger auditÃ¡vel de CV</td><td>member_id, order_id, cv_amount, cv_type, month_year</td></tr>
                    <tr><td><code>cv_monthly_summary</code></td><td>Resumo mensal por membro</td><td>member_id, month_year, total_cv, status_at_close</td></tr>
                </tbody>
            </table>
        </section>

        <hr>

        <!-- Sprint 3 -->
        <section id="sprint3">
            <h1>ğŸŒ Sprint 3 â€” Rede Visual + NÃ­veis âœ…</h1>
            <p><strong>Data de conclusÃ£o:</strong> 09/01/2026 | <strong>FRs cobertos:</strong> FR-10, FR-11, FR-17 (parcial), FR-18, FR-19, FR-20</p>

            <h3>O que foi entregue</h3>
            <table>
                <thead><tr><th>#</th><th>Funcionalidade</th><th>FR</th><th>Status</th><th>DescriÃ§Ã£o</th></tr></thead>
                <tbody>
                    <tr><td>1</td><td>VisualizaÃ§Ã£o da rede (membro)</td><td>FR-10</td><td><span class="tag green">âœ“</span></td><td>Ãrvore visual com toda a rede</td></tr>
                    <tr><td>2</td><td>VisualizaÃ§Ã£o da rede (admin)</td><td>FR-11</td><td><span class="tag green">âœ“</span></td><td>Admin vÃª rede de qualquer membro</td></tr>
                    <tr><td>3</td><td>NÃ­veis de lideranÃ§a</td><td>FR-18</td><td><span class="tag green">âœ“</span></td><td>CÃ¡lculo automÃ¡tico de nÃ­vel</td></tr>
                    <tr><td>4</td><td>Progresso para prÃ³ximo nÃ­vel</td><td>FR-18</td><td><span class="tag green">âœ“</span></td><td>Requisitos e % de conclusÃ£o</td></tr>
                    <tr><td>5</td><td>LÃ­der em FormaÃ§Ã£o (90 dias)</td><td>FR-19</td><td><span class="tag green">âœ“</span></td><td>Janela de promoÃ§Ã£o temporÃ¡ria</td></tr>
                    <tr><td>6</td><td>Rebaixamento automÃ¡tico</td><td>FR-20</td><td><span class="tag green">âœ“</span></td><td>Perde nÃ­vel se nÃ£o mantiver requisitos</td></tr>
                    <tr><td>7</td><td>Privacidade de telefone</td><td>-</td><td><span class="tag green">âœ“</span></td><td>ConfiguraÃ§Ã£o de visibilidade</td></tr>
                </tbody>
            </table>

            <h3>NÃ­veis de LideranÃ§a</h3>
            <table>
                <thead><tr><th>NÃ­vel</th><th>Requisitos</th><th>BenefÃ­cios</th></tr></thead>
                <tbody>
                    <tr><td><strong>Membro</strong></td><td>Cliente cadastrada</td><td>PreÃ§o de membro</td></tr>
                    <tr><td><strong>Parceira</strong></td><td>Membro Ativo + CV_rede >= 500</td><td>ComissÃ£o 5% de clientes N1</td></tr>
                    <tr><td><strong>LÃ­der em FormaÃ§Ã£o</strong></td><td>Parceira + 1Âª Parceira em N1 (90 dias)</td><td>ComissÃ£o como LÃ­der por 90 dias</td></tr>
                    <tr><td><strong>LÃ­der</strong></td><td>Parceira Ativa + 4 Parceiras Ativas em N1</td><td>ComissÃ£o 7% da rede</td></tr>
                    <tr><td><strong>Diretora</strong></td><td>3 LÃ­deres Ativas em N1 + 80.000 CV na rede</td><td>Leadership 3% + ComissÃ£o 10%</td></tr>
                    <tr><td><strong>Head</strong></td><td>3 Diretoras Ativas em N1 + 200.000 CV na rede</td><td>Leadership 4% + Royalty</td></tr>
                </tbody>
            </table>

            <details>
                <summary>ğŸ“‹ Fluxo de Funcionamento â€” VisualizaÃ§Ã£o da Rede</summary>
                <div class="content">
                    <div class="diagram">
<pre>1ï¸âƒ£ MEMBRO ACESSA "MINHA REDE" â†’ /dashboard/network
   â–¼
2ï¸âƒ£ SISTEMA BUSCA REDE COMPLETA
   â”‚  FunÃ§Ã£o RPC: get_network_tree(member_id)
   â”‚  â”œâ”€â”€ CTE recursiva no banco
   â”‚  â”œâ”€â”€ Busca todos os indicados (N1, N2, N3...)
   â”‚  â””â”€â”€ Limite tÃ©cnico: 20 nÃ­veis de profundidade
   â–¼
3ï¸âƒ£ SISTEMA APLICA LAZY LOADING
   â”‚  Para redes grandes:
   â”‚  â”œâ”€â”€ Carrega N1 imediatamente
   â”‚  â””â”€â”€ Carrega N2+ sob demanda (expand/collapse)
   â–¼
4ï¸âƒ£ EXIBE ÃRVORE VISUAL
   â”‚  Componente: NetworkTree
   â”‚  â”‚  VocÃª (N0)
   â”‚  â”‚  â”œâ”€â”€ Maria (N1) - Parceira - Ativa - CV: 350
   â”‚  â”‚  â”‚   â”œâ”€â”€ Ana (N2) - Membro - Ativa - CV: 220
   â”‚  â”‚  â”‚   â””â”€â”€ Carla (N2) - Membro - Inativa - CV: 50
   â”‚  â”‚  â”œâ”€â”€ Julia (N1) - Membro - Ativa - CV: 200
   â”‚  â”‚  â””â”€â”€ Paula (N1) - Membro - Pendente - CV: 0
   â–¼
5ï¸âƒ£ EXIBE ESTATÃSTICAS DA REDE
   â””â”€â”€ Total de membros, Membros ativos, CV total da rede</pre>
                    </div>
                </div>
            </details>

            <details>
                <summary>ğŸ“Š Fluxo de CÃ¡lculo de NÃ­veis</summary>
                <div class="content">
                    <div class="diagram">
<pre>1ï¸âƒ£ TRIGGER: ApÃ³s qualquer mudanÃ§a de CV ou status
   â–¼
2ï¸âƒ£ SISTEMA AVALIA REQUISITOS (de cima para baixo)
   â”‚
   â”‚  HEAD? â†’ 3 Diretoras Ativas em N1 + 200.000 CV rede? â†’ nÃ­vel = 'head'
   â”‚  DIRETORA? â†’ 3 LÃ­deres Ativas em N1 + 80.000 CV rede? â†’ nÃ­vel = 'diretora'
   â”‚  LÃDER? â†’ Parceira Ativa + 4 Parceiras Ativas em N1? â†’ nÃ­vel = 'lider'
   â”‚  LÃDER EM FORMAÃ‡ÃƒO? â†’ Parceira + 1Âª Parceira N1 + janela 90 dias? â†’ nÃ­vel = 'lider_formacao'
   â”‚  PARCEIRA? â†’ Membro Ativo (CV >= 200) + CV_rede >= 500? â†’ nÃ­vel = 'parceira'
   â”‚  SenÃ£o â†’ nÃ­vel = 'membro'
   â–¼
3ï¸âƒ£ SISTEMA ATUALIZA NÃVEL
   â”‚  â”œâ”€â”€ Atualiza members.level
   â”‚  â”œâ”€â”€ Registra em member_level_history (auditoria)
   â”‚  â””â”€â”€ Atualiza level_updated_at
   â–¼
4ï¸âƒ£ SISTEMA VERIFICA REBAIXAMENTO
   â””â”€â”€ Se nÃ­vel anterior > nÃ­vel atual: Registra motivo do rebaixamento</pre>
                    </div>
                </div>
            </details>

            <details>
                <summary>ğŸ§ª Testes Realizados e Resultados</summary>
                <div class="content">
                    <h4>CenÃ¡rio 1: VisualizaÃ§Ã£o da rede âœ…</h4>
                    <table class="test-table">
                        <thead><tr><th>Passo</th><th>AÃ§Ã£o</th><th>Resultado Esperado</th><th>Status</th></tr></thead>
                        <tbody>
                            <tr><td>1</td><td>Acessar /dashboard/network</td><td>PÃ¡gina carrega</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>2</td><td>Verificar Ã¡rvore</td><td>N1 visÃ­vel</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>3</td><td>Expandir N1</td><td>N2 carrega</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>4</td><td>Verificar dados</td><td>Nome, status, CV corretos</td><td><span class="tag green">âœ“</span></td></tr>
                        </tbody>
                    </table>

                    <h4>CenÃ¡rio 2: PromoÃ§Ã£o para Parceira âœ…</h4>
                    <table class="test-table">
                        <thead><tr><th>Passo</th><th>AÃ§Ã£o</th><th>Resultado Esperado</th><th>Status</th></tr></thead>
                        <tbody>
                            <tr><td>1</td><td>Membro atinge 200 CV</td><td>Status = active</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>2</td><td>Rede atinge 500 CV</td><td>NÃ­vel = parceira</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>3</td><td>Dashboard atualiza</td><td>Mostra novo nÃ­vel</td><td><span class="tag green">âœ“</span></td></tr>
                        </tbody>
                    </table>

                    <h4>CenÃ¡rio 3: Rebaixamento automÃ¡tico âœ…</h4>
                    <table class="test-table">
                        <thead><tr><th>Passo</th><th>AÃ§Ã£o</th><th>Resultado Esperado</th><th>Status</th></tr></thead>
                        <tbody>
                            <tr><td>1</td><td>LÃ­der perde 1 Parceira N1</td><td>NÃ­vel = parceira</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>2</td><td>HistÃ³rico registrado</td><td>Motivo do rebaixamento</td><td><span class="tag green">âœ“</span></td></tr>
                        </tbody>
                    </table>
                </div>
            </details>
        </section>

        <hr>

        <!-- Sprint 4 -->
        <section id="sprint4">
            <h1>ğŸ’° Sprint 4 â€” ComissÃµes + Ledger âœ…</h1>
            <p><strong>Data de conclusÃ£o:</strong> 10/01/2026 | <strong>FRs cobertos:</strong> FR-21 a FR-27</p>

            <h3>O que foi entregue</h3>
            <table>
                <thead><tr><th>#</th><th>Funcionalidade</th><th>FR</th><th>Status</th><th>DescriÃ§Ã£o</th></tr></thead>
                <tbody>
                    <tr><td>1</td><td>Fast-Track</td><td>FR-22</td><td><span class="tag green">âœ“</span></td><td>30%/20% nos primeiros 60 dias</td></tr>
                    <tr><td>2</td><td>ComissÃ£o PerpÃ©tua</td><td>FR-23</td><td><span class="tag green">âœ“</span></td><td>Diferenciada por tipo de N1</td></tr>
                    <tr><td>3</td><td>BÃ´nus 3</td><td>FR-24</td><td><span class="tag green">âœ“</span></td><td>R$250 / R$1.500 / R$8.000</td></tr>
                    <tr><td>4</td><td>Leadership BÃ´nus</td><td>FR-25</td><td><span class="tag green">âœ“</span></td><td>3%/4% para Diretora/Head</td></tr>
                    <tr><td>5</td><td>Royalty</td><td>FR-26</td><td><span class="tag green">âœ“</span></td><td>3% quando Head forma Head</td></tr>
                    <tr><td>6</td><td>Dashboard de comissÃµes</td><td>FR-27</td><td><span class="tag green">âœ“</span></td><td>Saldo, histÃ³rico, detalhes</td></tr>
                    <tr><td>7</td><td>Painel admin</td><td>FR-27</td><td><span class="tag green">âœ“</span></td><td>GestÃ£o de todas comissÃµes</td></tr>
                    <tr><td>8</td><td>Ledger auditÃ¡vel</td><td>FR-21</td><td><span class="tag green">âœ“</span></td><td>Registro imutÃ¡vel</td></tr>
                </tbody>
            </table>

            <div class="callout red">
                <span class="callout-icon">ğŸš¨</span>
                <div class="callout-content">
                    <strong>ComissÃ£o PerpÃ©tua â€” REGRA IMPORTANTE!</strong>
                    <p style="margin-top: 8px;">O percentual depende do nÃ­vel do SPONSOR E do tipo do COMPRADOR (N1)!</p>
                </div>
            </div>

            <h3>Tabela de ComissÃ£o PerpÃ©tua</h3>
            <table>
                <thead><tr><th>NÃ­vel Sponsor</th><th>Tipo de N1</th><th>Percentual</th></tr></thead>
                <tbody>
                    <tr><td>Parceira</td><td>Cliente</td><td>5%</td></tr>
                    <tr><td>Parceira</td><td>Parceira+</td><td><span class="tag red">0% (NÃƒO recebe)</span></td></tr>
                    <tr><td>LÃ­der</td><td>Cliente</td><td>5%</td></tr>
                    <tr><td>LÃ­der</td><td>Parceira+</td><td>7%</td></tr>
                    <tr><td>Diretora</td><td>Cliente</td><td>5%</td></tr>
                    <tr><td>Diretora</td><td>Parceira</td><td>7%</td></tr>
                    <tr><td>Diretora</td><td>LÃ­der+</td><td>10%</td></tr>
                    <tr><td>Head</td><td>Cliente</td><td>5%</td></tr>
                    <tr><td>Head</td><td>Parceira</td><td>7%</td></tr>
                    <tr><td>Head</td><td>LÃ­der</td><td>10%</td></tr>
                    <tr><td>Head</td><td>Rede</td><td>15%</td></tr>
                </tbody>
            </table>

            <h3>Fast-Track (60 dias)</h3>
            <table>
                <thead><tr><th>PerÃ­odo</th><th>ComissÃ£o</th></tr></thead>
                <tbody>
                    <tr><td>Dias 1-30</td><td>N0 recebe <strong>30%</strong> CV de N1</td></tr>
                    <tr><td>Dias 31-60</td><td>N0 recebe <strong>20%</strong> CV de N1</td></tr>
                    <tr><td>ApÃ³s 60 dias</td><td>ComissÃ£o PerpÃ©tua (tabela acima)</td></tr>
                </tbody>
            </table>

            <h3>BÃ´nus 3</h3>
            <table>
                <thead><tr><th>Valor</th><th>Requisito</th></tr></thead>
                <tbody>
                    <tr><td><strong>R$ 250</strong></td><td>3 Parceiras Ativas em N1 por 1 mÃªs</td></tr>
                    <tr><td><strong>R$ 1.500</strong></td><td>Cada N1 com 3 Parceiras Ativas</td></tr>
                    <tr><td><strong>R$ 8.000</strong></td><td>Cada N2 com 3 Parceiras Ativas</td></tr>
                </tbody>
            </table>

            <div class="columns">
                <div class="column">
                    <h4>Leadership BÃ´nus</h4>
                    <p>Diretora: <strong>3% CV</strong> da rede</p>
                    <p>Head: <strong>4% CV</strong> da rede</p>
                </div>
                <div class="column">
                    <h4>Royalty (Head forma Head)</h4>
                    <p>Head N0 forma Head N1 â†’ recebe <strong>3% CV</strong> da nova rede</p>
                    <p style="font-size: 13px; color: var(--text-secondary);">A separaÃ§Ã£o NÃƒO faz N0 perder status</p>
                </div>
            </div>

            <details>
                <summary>ğŸ“‹ Fluxo de Funcionamento â€” CÃ¡lculo de ComissÃµes</summary>
                <div class="content">
                    <div class="diagram">
<pre>1ï¸âƒ£ PEDIDO PAGO (Webhook orders/paid)
   â”‚  Mesmo webhook do Sprint 2 - ApÃ³s calcular CV, calcula comissÃµes
   â–¼
2ï¸âƒ£ IDENTIFICA COMPRADOR E SPONSOR
   â”‚  â”œâ”€â”€ Comprador: membro que fez a compra (N1)
   â”‚  â””â”€â”€ Sponsor: quem indicou o comprador (N0)
   â–¼
3ï¸âƒ£ VERIFICA JANELA FAST-TRACK
   â”‚  â”œâ”€â”€ Comprador cadastrado hÃ¡ menos de 30 dias? â†’ Fast-Track 30% âœ…
   â”‚  â”œâ”€â”€ Comprador cadastrado entre 31-60 dias? â†’ Fast-Track 20% âœ…
   â”‚  â””â”€â”€ Comprador cadastrado hÃ¡ mais de 60 dias? â†’ ComissÃ£o PerpÃ©tua âœ…
   â–¼
4ï¸âƒ£ CALCULA FAST-TRACK (se aplicÃ¡vel)
   â”‚  ComissÃ£o = CV_pedido Ã— percentual (30% ou 20%)
   â–¼
5ï¸âƒ£ CALCULA COMISSÃƒO PERPÃ‰TUA (se Fast-Track expirou)
   â”‚  â”œâ”€â”€ Verifica nÃ­vel do SPONSOR
   â”‚  â”œâ”€â”€ Verifica tipo do COMPRADOR (N1)
   â”‚  â””â”€â”€ Aplica percentual conforme tabela
   â–¼
6ï¸âƒ£ CALCULA LEADERSHIP BÃ”NUS (se aplicÃ¡vel)
   â”‚  â”œâ”€â”€ Diretora: 3% CV da rede
   â”‚  â””â”€â”€ Head: 4% CV da rede
   â–¼
7ï¸âƒ£ REGISTRA NO LEDGER
   â”‚  Para cada comissÃ£o calculada:
   â”‚  â”œâ”€â”€ Cria entrada em commission_ledger (imutÃ¡vel)
   â”‚  â””â”€â”€ Atualiza commission_balances</pre>
                    </div>
                </div>
            </details>

            <details>
                <summary>ğŸ§ª RelatÃ³rio de Testes â€” Sprint 4</summary>
                <div class="content">
                    <p style="color: var(--text-secondary);">Data de execuÃ§Ã£o: 10/01/2026</p>

                    <h4>Testes de ComissÃ£o PerpÃ©tua (FunÃ§Ã£o RPC)</h4>
                    <table class="test-table">
                        <thead><tr><th>Sponsor</th><th>Comprador</th><th>Resultado</th><th>Esperado</th><th>Status</th></tr></thead>
                        <tbody>
                            <tr><td>parceira</td><td>membro</td><td>5.00%</td><td>5% (cliente)</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>parceira</td><td>parceira</td><td>0.00%</td><td>0% (NÃƒO recebe)</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>parceira</td><td>lider</td><td>0.00%</td><td>0% (NÃƒO recebe)</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>lider</td><td>membro</td><td>5.00%</td><td>5% (cliente)</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>lider</td><td>parceira</td><td>7.00%</td><td>7% (rede)</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>diretora</td><td>membro</td><td>5.00%</td><td>5% (cliente)</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>diretora</td><td>parceira</td><td>7.00%</td><td>7% (parceira)</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>diretora</td><td>lider</td><td>10.00%</td><td>10% (lÃ­der)</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>head</td><td>membro</td><td>5.00%</td><td>5% (cliente)</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>head</td><td>parceira</td><td>7.00%</td><td>7% (parceira)</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>head</td><td>lider</td><td>10.00%</td><td>10% (lÃ­der N1)</td><td><span class="tag green">âœ“</span></td></tr>
                        </tbody>
                    </table>

                    <h4>Resumo dos Testes</h4>
                    <table>
                        <thead><tr><th>Categoria</th><th>Total</th><th>Passou</th><th>Falhou</th></tr></thead>
                        <tbody>
                            <tr><td>Schema/Estrutura</td><td>9</td><td>9</td><td>0</td></tr>
                            <tr><td>RPC Functions</td><td>14</td><td>14</td><td>0</td></tr>
                            <tr><td>RLS Policies</td><td>2</td><td>2</td><td>0</td></tr>
                            <tr><td>Integridade</td><td>1</td><td>1</td><td>0</td></tr>
                            <tr><td>Ãndices</td><td>6</td><td>6</td><td>0</td></tr>
                            <tr><td>Dashboard Membro</td><td>7</td><td>7</td><td>0</td></tr>
                            <tr><td>Painel Admin</td><td>5</td><td>5</td><td>0</td></tr>
                            <tr style="font-weight: 600; background: var(--green-bg);"><td>TOTAL</td><td>44</td><td>44</td><td>0</td></tr>
                        </tbody>
                    </table>

                    <div class="callout green">
                        <span class="callout-icon">ğŸ‰</span>
                        <div class="callout-content"><strong>Taxa de sucesso: 100%</strong></div>
                    </div>
                </div>
            </details>

            <h3>Banco de Dados Criado</h3>
            <table>
                <thead><tr><th>Tabela</th><th>DescriÃ§Ã£o</th><th>Campos principais</th></tr></thead>
                <tbody>
                    <tr><td><code>commission_ledger</code></td><td>Ledger imutÃ¡vel</td><td>member_id, commission_type, amount, cv_base, percentage</td></tr>
                    <tr><td><code>commission_balances</code></td><td>Saldo consolidado</td><td>total_earned, total_withdrawn, available_balance</td></tr>
                    <tr><td><code>fast_track_windows</code></td><td>Janelas de 60 dias</td><td>sponsor_id, member_id, phase_1_ends_at, phase_2_ends_at</td></tr>
                    <tr><td><code>bonus_3_tracking</code></td><td>Elegibilidade BÃ´nus 3</td><td>active_partners_n1, eligible_level_1/2/3</td></tr>
                    <tr><td><code>royalty_networks</code></td><td>Redes separadas</td><td>original_head_id, new_head_id, royalty_percentage</td></tr>
                </tbody>
            </table>
        </section>

        <hr>

        <!-- Sprint 5 -->
        <section id="sprint5">
            <h1>ğŸ’¸ Sprint 5 â€” Saques + Fiscal âœ…</h1>
            <p><strong>Data de conclusÃ£o:</strong> 15/01/2026 | <strong>FRs cobertos:</strong> FR-28, FR-29, FR-30, FR-31, FR-32 | FR-33 âš ï¸</p>

            <h3>O que foi entregue</h3>
            <table>
                <thead><tr><th>#</th><th>Funcionalidade</th><th>FR</th><th>Status</th><th>DescriÃ§Ã£o</th></tr></thead>
                <tbody>
                    <tr><td>1</td><td>Saldo em anÃ¡lise</td><td>FR-28</td><td><span class="tag green">âœ“</span></td><td>PerÃ­odo de trava configurÃ¡vel</td></tr>
                    <tr><td>2</td><td>SolicitaÃ§Ã£o de saque</td><td>FR-29</td><td><span class="tag green">âœ“</span></td><td>FormulÃ¡rio com validaÃ§Ã£o PF/PJ</td></tr>
                    <tr><td>3</td><td>Upload de NF-e</td><td>FR-30</td><td><span class="tag green">âœ“</span></td><td>PJ envia nota fiscal</td></tr>
                    <tr><td>4</td><td>EmissÃ£o de RPA</td><td>FR-31</td><td><span class="tag green">âœ“</span></td><td>GeraÃ§Ã£o automÃ¡tica para PF</td></tr>
                    <tr><td>5</td><td>Workflow de aprovaÃ§Ã£o</td><td>FR-32</td><td><span class="tag green">âœ“</span></td><td>Admin aprova/rejeita saques</td></tr>
                    <tr><td>6</td><td>IntegraÃ§Ã£o de pagamento</td><td>FR-33</td><td><span class="tag yellow">âš ï¸</span></td><td>Aguardando definiÃ§Ã£o fintech</td></tr>
                </tbody>
            </table>

            <div class="callout blue">
                <span class="callout-icon">ğŸ’°</span>
                <div class="callout-content">
                    <strong>Regras de Saque Implementadas</strong>
                    <p style="margin-top: 8px;"><strong>PF:</strong> Limite R$1.000/mÃªs, RPA automÃ¡tico</p>
                    <p><strong>PJ:</strong> Sem limite, NF-e obrigatÃ³ria</p>
                    <p><strong>Geral:</strong> MÃ­nimo R$100, Net-15 (disponÃ­vel 15 dias apÃ³s virada do mÃªs)</p>
                    <p><strong>Pagamento:</strong> Via Asaas (PIX/TED)</p>
                    <p><strong>Cancelamento:</strong> Chargeback, Cancelamento ou DevoluÃ§Ã£o apagam comissÃ£o</p>
                </div>
            </div>

            <details>
                <summary>ğŸ“‹ Fluxo de Funcionamento â€” SolicitaÃ§Ã£o de Saque</summary>
                <div class="content">
                    <div class="diagram">
<pre>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FLUXO DE SOLICITAÃ‡ÃƒO DE SAQUE (Sprint 5)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1ï¸âƒ£ MEMBRO ACESSA "MEUS SAQUES"
   â”‚  URL: /dashboard/payouts
   â–¼
2ï¸âƒ£ SISTEMA EXIBE SALDO DISPONÃVEL
   â”‚  â”œâ”€â”€ Saldo total (total_earned)
   â”‚  â”œâ”€â”€ JÃ¡ sacado (total_withdrawn)
   â”‚  â”œâ”€â”€ Em anÃ¡lise (pending_amount)
   â”‚  â””â”€â”€ DisponÃ­vel (available_balance)
   â–¼
3ï¸âƒ£ MEMBRO PREENCHE FORMULÃRIO
   â”‚  â”œâ”€â”€ Valor do saque
   â”‚  â”œâ”€â”€ Tipo de pessoa (PF ou PJ)
   â”‚  â”œâ”€â”€ CPF ou CNPJ
   â”‚  â””â”€â”€ Dados bancÃ¡rios
   â–¼
4ï¸âƒ£ SISTEMA VALIDA REQUISITOS
   â”‚  â”œâ”€â”€ Saldo disponÃ­vel >= valor?
   â”‚  â”œâ”€â”€ Valor >= mÃ­nimo (R$100)?
   â”‚  â””â”€â”€ Se PF: limite mensal nÃ£o excedido (R$1.000)?
   â–¼
5ï¸âƒ£ SISTEMA CRIA SOLICITAÃ‡ÃƒO
   â”‚  â”œâ”€â”€ Status: 'pending' (PF) ou 'awaiting_document' (PJ)
   â”‚  â””â”€â”€ Atualiza pending_amount
   â–¼
6ï¸âƒ£ FLUXO PF vs PJ
   â”‚  SE PF: Sistema gera RPA â†’ aguarda aprovaÃ§Ã£o
   â”‚  SE PJ: Membro deve enviar NF-e</pre>
                    </div>
                </div>
            </details>

            <details>
                <summary>ğŸ“„ Fluxo de Upload NF-e (PJ)</summary>
                <div class="content">
                    <div class="diagram">
<pre>1ï¸âƒ£ MEMBRO PJ COM SAQUE PENDENTE
   â”‚  Status: 'awaiting_document'
   â–¼
2ï¸âƒ£ MEMBRO FAZ UPLOAD DA NF-e
   â”‚  POST /api/members/me/payouts/[id]/documents
   â”‚  â”œâ”€â”€ Arquivo: PDF ou XML
   â”‚  â”œâ”€â”€ NÃºmero da nota
   â”‚  â””â”€â”€ Valor da nota
   â–¼
3ï¸âƒ£ SISTEMA ARMAZENA DOCUMENTO
   â”‚  â”œâ”€â”€ Upload para Supabase Storage
   â”‚  â””â”€â”€ Status muda para 'under_review'
   â–¼
4ï¸âƒ£ ADMIN VALIDA NF-e
   â”‚  â”œâ”€â”€ Verifica valor NF-e = valor saque
   â”‚  â””â”€â”€ Aprova ou rejeita</pre>
                    </div>
                </div>
            </details>

            <details>
                <summary>âœ… Fluxo de AprovaÃ§Ã£o (Admin)</summary>
                <div class="content">
                    <div class="diagram">
<pre>1ï¸âƒ£ ADMIN ACESSA "GESTÃƒO DE SAQUES"
   â”‚  URL: /admin/payouts
   â–¼
2ï¸âƒ£ LISTA DE SOLICITAÃ‡Ã•ES PENDENTES
   â”‚  Filtros: status, tipo (PF/PJ), membro
   â–¼
3ï¸âƒ£ ADMIN ANALISA SOLICITAÃ‡ÃƒO
   â”‚  â”œâ”€â”€ Dados do membro
   â”‚  â”œâ”€â”€ HistÃ³rico de saques
   â”‚  â””â”€â”€ Documentos anexados
   â–¼
4ï¸âƒ£ ADMIN APROVA OU REJEITA
   â”‚  SE APROVAR:
   â”‚  â”œâ”€â”€ Status = 'approved'
   â”‚  â””â”€â”€ Atualiza total_withdrawn
   â”‚
   â”‚  SE REJEITAR:
   â”‚  â”œâ”€â”€ Status = 'rejected'
   â”‚  â””â”€â”€ Devolve valor para available_balance
   â–¼
5ï¸âƒ£ PAGAMENTO (via Asaas)
   â””â”€â”€ TransferÃªncia automÃ¡tica PIX/TED</pre>
                    </div>
                </div>
            </details>

            <details>
                <summary>ğŸ§ª Testes Realizados e Resultados</summary>
                <div class="content">
                    <h4>CenÃ¡rio 1: SolicitaÃ§Ã£o de saque PF âœ…</h4>
                    <table class="test-table">
                        <thead><tr><th>Passo</th><th>AÃ§Ã£o</th><th>Resultado Esperado</th><th>Status</th></tr></thead>
                        <tbody>
                            <tr><td>1</td><td>Acessar /dashboard/payouts</td><td>PÃ¡gina carrega com saldo</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>2</td><td>Preencher formulÃ¡rio PF</td><td>ValidaÃ§Ã£o de CPF</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>3</td><td>Solicitar R$100</td><td>SolicitaÃ§Ã£o criada</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>4</td><td>Verificar limite mensal</td><td>Atualizado</td><td><span class="tag green">âœ“</span></td></tr>
                        </tbody>
                    </table>

                    <h4>CenÃ¡rio 2: SolicitaÃ§Ã£o de saque PJ âœ…</h4>
                    <table class="test-table">
                        <thead><tr><th>Passo</th><th>AÃ§Ã£o</th><th>Resultado Esperado</th><th>Status</th></tr></thead>
                        <tbody>
                            <tr><td>1</td><td>Preencher formulÃ¡rio PJ</td><td>ValidaÃ§Ã£o de CNPJ</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>2</td><td>Solicitar R$500</td><td>Status = 'awaiting_document'</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>3</td><td>Upload NF-e</td><td>Documento armazenado</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>4</td><td>Verificar status</td><td>Mudou para 'under_review'</td><td><span class="tag green">âœ“</span></td></tr>
                        </tbody>
                    </table>

                    <h4>CenÃ¡rio 3: AprovaÃ§Ã£o pelo Admin âœ…</h4>
                    <table class="test-table">
                        <thead><tr><th>Passo</th><th>AÃ§Ã£o</th><th>Resultado Esperado</th><th>Status</th></tr></thead>
                        <tbody>
                            <tr><td>1</td><td>Acessar /admin/payouts</td><td>Lista de solicitaÃ§Ãµes</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>2</td><td>Aprovar solicitaÃ§Ã£o</td><td>Status = 'approved'</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>3</td><td>Verificar saldo</td><td>total_withdrawn atualizado</td><td><span class="tag green">âœ“</span></td></tr>
                        </tbody>
                    </table>

                    <h4>CenÃ¡rio 4: Limite PF mensal âœ…</h4>
                    <table class="test-table">
                        <thead><tr><th>Passo</th><th>AÃ§Ã£o</th><th>Resultado Esperado</th><th>Status</th></tr></thead>
                        <tbody>
                            <tr><td>1</td><td>PF solicita R$1.000</td><td>Aprovado</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>2</td><td>PF solicita mais R$100</td><td>Erro: limite excedido</td><td><span class="tag green">âœ“</span></td></tr>
                            <tr><td>3</td><td>PrÃ³ximo mÃªs</td><td>Limite resetado</td><td><span class="tag green">âœ“</span></td></tr>
                        </tbody>
                    </table>
                </div>
            </details>

            <h3>Banco de Dados Criado</h3>
            <table>
                <thead><tr><th>Tabela</th><th>DescriÃ§Ã£o</th><th>Campos principais</th></tr></thead>
                <tbody>
                    <tr><td><code>payout_requests</code></td><td>SolicitaÃ§Ãµes de saque</td><td>member_id, amount, status, person_type, bank_*</td></tr>
                    <tr><td><code>payout_documents</code></td><td>Documentos anexados</td><td>payout_request_id, document_type, file_path</td></tr>
                    <tr><td><code>payout_history</code></td><td>HistÃ³rico de mudanÃ§as</td><td>payout_request_id, old_status, new_status</td></tr>
                    <tr><td><code>payout_monthly_limits</code></td><td>Controle limite PF</td><td>member_id, month_year, total_requested</td></tr>
                </tbody>
            </table>
        </section>

        <hr>

        <!-- Sprint 7 -->
        <section id="sprint7">
            <h1>ğŸ Sprint 7 â€” Creatina Mensal âš ï¸</h1>

            <div class="callout yellow">
                <span class="callout-icon">âš ï¸</span>
                <div class="callout-content">
                    <strong>Status: PARCIAL (85%)</strong>
                    <p>Backend implementado, aguardando configuraÃ§Ã£o do Shopify Discount para aplicar desconto automÃ¡tico no checkout.</p>
                </div>
            </div>

            <h2>TBD-019 â€” Creatina Mensal GrÃ¡tis âœ… RESOLVIDO</h2>
            <p><strong>DecisÃ£o:</strong> Desconto de 100% aplicado no pedido real</p>

            <h3>Regra</h3>
            <ul class="bullet">
                <li><strong>Quem tem direito:</strong> Membro Ativo (CV >= 200 no mÃªs)</li>
                <li><strong>Limite:</strong> 1 unidade por mÃªs</li>
                <li><strong>NÃ£o acumula</strong> para o prÃ³ximo mÃªs</li>
            </ul>

            <h3>Como funciona</h3>
            <ol class="numbered">
                <li>Membro acessa o dashboard e vÃª o card "Creatina GrÃ¡tis do MÃªs"</li>
                <li>Se elegÃ­vel, adiciona a creatina ao carrinho em um pedido real</li>
                <li>O desconto de 100% Ã© aplicado automaticamente no checkout</li>
                <li>Sistema registra o uso (1x por mÃªs)</li>
            </ol>

            <h3>Estados do Card no Dashboard</h3>
            <table>
                <thead><tr><th>Estado</th><th>Cor</th><th>DescriÃ§Ã£o</th></tr></thead>
                <tbody>
                    <tr><td>DisponÃ­vel</td><td><span class="tag green">ğŸŸ¢ Verde</span></td><td>Membro ativo, ainda nÃ£o usou</td></tr>
                    <tr><td>JÃ¡ utilizado</td><td><span class="tag yellow">ğŸŸ¡ Amarelo</span></td><td>Membro usou este mÃªs</td></tr>
                    <tr><td>IndisponÃ­vel</td><td><span class="tag gray">âšª Cinza</span></td><td>Membro nÃ£o atingiu 200 CV</td></tr>
                </tbody>
            </table>

            <h3>O que foi implementado</h3>
            <table>
                <thead><tr><th>#</th><th>Funcionalidade</th><th>Status</th><th>DescriÃ§Ã£o</th></tr></thead>
                <tbody>
                    <tr><td>1</td><td>DecisÃ£o TBD-019</td><td><span class="tag green">âœ…</span></td><td>Desconto 100% no pedido real</td></tr>
                    <tr><td>2</td><td>Tabela de controle</td><td><span class="tag green">âœ…</span></td><td><code>free_creatine_claims</code></td></tr>
                    <tr><td>3</td><td>API de elegibilidade</td><td><span class="tag green">âœ…</span></td><td><code>GET /api/members/me/free-creatine</code></td></tr>
                    <tr><td>4</td><td>API de registro</td><td><span class="tag green">âœ…</span></td><td><code>POST /api/members/me/free-creatine</code></td></tr>
                    <tr><td>5</td><td>Card no dashboard</td><td><span class="tag green">âœ…</span></td><td>Mostra status do benefÃ­cio</td></tr>
                    <tr><td>6</td><td>Shopify Discount</td><td><span class="tag yellow">â³</span></td><td>ConfiguraÃ§Ã£o na loja pendente</td></tr>
                </tbody>
            </table>

            <h3>PrÃ³ximos Passos</h3>
            <ol class="numbered">
                <li><strong>Configurar no Shopify:</strong> Criar Discount Function ou Script para aplicar 100% OFF</li>
                <li><strong>Webhook de pedido:</strong> Detectar quando creatina foi comprada com desconto</li>
                <li><strong>Testar fluxo completo</strong></li>
            </ol>
        </section>

        <hr>

        <!-- Sprints Futuros -->
        <section id="futuro">
            <h1>ğŸ”® Sprints Futuros</h1>

            <h2>Sprint 8 â€” IntegraÃ§Ãµes â³</h2>

            <h3>Funcionalidades planejadas</h3>
            <ul class="bullet">
                <li>IntegraÃ§Ã£o Asaas automÃ¡tica (apÃ³s credenciais)</li>
                <li>ConfiguraÃ§Ã£o Shopify Discount para creatina</li>
                <li>Melhorias de UX baseadas em feedback</li>
            </ul>
        </section>

        <hr>

        <!-- Como Testar -->
        <section id="testar">
            <h1>ğŸ§ª Como Testar</h1>

            <h3>URLs de Acesso</h3>
            <table>
                <thead><tr><th>PÃ¡gina</th><th>URL</th></tr></thead>
                <tbody>
                    <tr><td>Home</td><td><a href="https://rlp-biohelp.vercel.app/">https://rlp-biohelp.vercel.app/</a></td></tr>
                    <tr><td>Login</td><td><a href="https://rlp-biohelp.vercel.app/login">https://rlp-biohelp.vercel.app/login</a></td></tr>
                    <tr><td>Cadastro</td><td><a href="https://rlp-biohelp.vercel.app/join?ref=SPONSOR01">https://rlp-biohelp.vercel.app/join?ref=SPONSOR01</a></td></tr>
                    <tr><td>Dashboard</td><td><a href="https://rlp-biohelp.vercel.app/dashboard">https://rlp-biohelp.vercel.app/dashboard</a></td></tr>
                    <tr><td>Minha Rede</td><td><a href="https://rlp-biohelp.vercel.app/dashboard/network">https://rlp-biohelp.vercel.app/dashboard/network</a></td></tr>
                    <tr><td>ComissÃµes</td><td><a href="https://rlp-biohelp.vercel.app/dashboard/commissions">https://rlp-biohelp.vercel.app/dashboard/commissions</a></td></tr>
                    <tr><td>Saques</td><td><a href="https://rlp-biohelp.vercel.app/dashboard/payouts">https://rlp-biohelp.vercel.app/dashboard/payouts</a></td></tr>
                    <tr><td>Admin</td><td><a href="https://rlp-biohelp.vercel.app/admin">https://rlp-biohelp.vercel.app/admin</a></td></tr>
                    <tr><td>Admin Saques</td><td><a href="https://rlp-biohelp.vercel.app/admin/payouts">https://rlp-biohelp.vercel.app/admin/payouts</a></td></tr>
                </tbody>
            </table>

            <h3>Logins de Teste</h3>
            <table>
                <thead><tr><th>Portal</th><th>Email</th><th>Senha</th></tr></thead>
                <tbody>
                    <tr><td>Admin</td><td><code>admin@biohelp.test</code></td><td><code>123456</code></td></tr>
                    <tr><td>Parceira</td><td><code>sponsor@biohelp.test</code></td><td><code>sponsor123</code></td></tr>
                </tbody>
            </table>

            <details>
                <summary>Teste 1: Dashboard da Parceira</summary>
                <div class="content">
                    <ol class="numbered">
                        <li>Acesse <a href="https://rlp-biohelp.vercel.app/login">https://rlp-biohelp.vercel.app/login</a></li>
                        <li>Login com: <code>sponsor@biohelp.test</code> / <code>sponsor123</code></li>
                        <li>Resultado esperado:</li>
                    </ol>
                    <ul class="checklist">
                        <li>Card de CV com valor atual</li>
                        <li>Barra de progresso da meta (200 CV)</li>
                        <li>Status "Ativo" (badge verde) se CV >= 200</li>
                        <li>Link de convite copiÃ¡vel</li>
                        <li>InformaÃ§Ãµes do sponsor</li>
                    </ul>
                </div>
            </details>

            <details>
                <summary>Teste 2: Minha Rede</summary>
                <div class="content">
                    <ol class="numbered">
                        <li>No dashboard, clique em "Minha Rede"</li>
                        <li>Resultado esperado:</li>
                    </ol>
                    <ul class="checklist">
                        <li>Ãrvore visual com indicados</li>
                        <li>Cada nÃ³ mostra: nome, status, nÃ­vel, CV</li>
                        <li>EstatÃ­sticas da rede</li>
                    </ul>
                </div>
            </details>

            <details>
                <summary>Teste 3: ComissÃµes</summary>
                <div class="content">
                    <ol class="numbered">
                        <li>No dashboard, clique em "ComissÃµes"</li>
                        <li>Resultado esperado:</li>
                    </ol>
                    <ul class="checklist">
                        <li>Saldo total</li>
                        <li>Breakdown por tipo (Fast-Track, PerpÃ©tua, etc.)</li>
                        <li>HistÃ³rico de comissÃµes</li>
                    </ul>
                </div>
            </details>

            <details>
                <summary>Teste 4: Painel Admin</summary>
                <div class="content">
                    <ol class="numbered">
                        <li>Acesse <a href="https://rlp-biohelp.vercel.app/login">https://rlp-biohelp.vercel.app/login</a></li>
                        <li>Login com: <code>admin@biohelp.test</code> / <code>123456</code></li>
                        <li>Resultado esperado:</li>
                    </ol>
                    <ul class="checklist">
                        <li>Lista de parceiras</li>
                        <li>Busca por nome/email</li>
                        <li>BotÃ£o "CV" para ver detalhes</li>
                        <li>BotÃ£o "Resync" para sincronizar Shopify</li>
                    </ul>
                </div>
            </details>
        </section>

        <hr>

        <!-- DecisÃµes Pendentes -->
        <section id="tbd">
            <h1>ğŸ“‹ DecisÃµes Pendentes (TBD)</h1>

            <h3>CrÃ­ticos para Sprint 6</h3>
            <table>
                <thead><tr><th>TBD</th><th>DescriÃ§Ã£o</th><th>FR Bloqueado</th></tr></thead>
                <tbody>
                    <tr><td>-</td><td>Nenhum TBD crÃ­tico</td><td>-</td></tr>
                </tbody>
            </table>

            <h3>Outros Pendentes</h3>
            <table>
                <thead><tr><th>TBD</th><th>DescriÃ§Ã£o</th><th>Sprint</th></tr></thead>
                <tbody>
                    <tr><td>TBD-001</td><td>Regra para cadastro sem link</td><td>1</td></tr>
                    <tr><td>TBD-004</td><td>URLs oficiais (staging/prod)</td><td>1</td></tr>
                    <tr><td>TBD-014</td><td>Nome do metafield CV</td><td>2</td></tr>
                    <tr><td>TBD-019</td><td>Creatina mensal grÃ¡tis</td><td>7</td></tr>
                </tbody>
            </table>

            <h3>Resolvidos âœ…</h3>
            <table>
                <thead><tr><th>TBD</th><th>DescriÃ§Ã£o</th><th>DecisÃ£o</th></tr></thead>
                <tbody>
                    <tr><td>TBD-008</td><td>CÃ¡lculo de CV</td><td>Via metafield do produto</td></tr>
                    <tr><td>TBD-009</td><td>Refund/cancel</td><td>Reverte CV completamente</td></tr>
                    <tr><td>TBD-010</td><td>Job mensal</td><td>1Âº dia Ã s 00:00 BRT</td></tr>
                    <tr><td>TBD-011</td><td>Regras de nÃ­veis</td><td>Conforme documento canÃ´nico</td></tr>
                    <tr><td>TBD-012</td><td>Profundidade da rede</td><td>Ilimitada</td></tr>
                    <tr><td>TBD-013</td><td>InformaÃ§Ãµes visÃ­veis</td><td>Nome, email, CV, status, nÃ­vel</td></tr>
                    <tr><td>TBD-017</td><td>Arredondamento</td><td>2 casas decimais</td></tr>
                    <tr><td>TBD-020</td><td>CÃ¡lculo de comissÃµes</td><td>Em tempo real</td></tr>
                    <tr><td>TBD-022</td><td>PerpÃ©tua diferenciada</td><td>Por tipo de N1</td></tr>
                    <tr><td>TBD-015</td><td>Limite de saque PF</td><td>R$1.000/mÃªs</td></tr>
                    <tr><td>TBD-016</td><td>Valor mÃ­nimo para saque</td><td>R$100/saque</td></tr>
                    <tr><td>TBD-018</td><td>IntegraÃ§Ã£o fintech</td><td>Asaas (PIX/TED)</td></tr>
                    <tr><td>TBD-021</td><td>PerÃ­odo de trava</td><td>Net-15 (15 dias apÃ³s virada do mÃªs)</td></tr>
                </tbody>
            </table>
        </section>

        <hr>

        <!-- Checklist de Aceite -->
        <section>
            <h1>âœ… Checklist de Aceite</h1>

            <div class="columns">
                <div class="column">
                    <h4>Sprint 1 âœ…</h4>
                    <ul class="checklist">
                        <li>Cadastro com link vincula sponsor</li>
                        <li>ref_code Ãºnico gerado</li>
                        <li>Customer Shopify criado/atualizado</li>
                        <li>Tags aplicadas corretamente</li>
                        <li>Dashboard mostra link de convite</li>
                        <li>Admin busca membro e executa resync</li>
                        <li>RLS ativo</li>
                    </ul>
                </div>
                <div class="column">
                    <h4>Sprint 2 âœ…</h4>
                    <ul class="checklist">
                        <li>Webhooks idempotentes</li>
                        <li>CV via metafield do produto</li>
                        <li>Status muda para active/inactive</li>
                        <li>Job mensal fecha mÃªs</li>
                        <li>Admin pode ver/ajustar CV</li>
                        <li>Ledger auditÃ¡vel</li>
                    </ul>
                </div>
            </div>

            <div class="columns">
                <div class="column">
                    <h4>Sprint 3 âœ…</h4>
                    <ul class="checklist">
                        <li>API de rede funcionando</li>
                        <li>API de nÃ­vel funcionando</li>
                        <li>PÃ¡gina "Minha Rede" com Ã¡rvore visual</li>
                        <li>Progresso para prÃ³ximo nÃ­vel</li>
                        <li>Privacidade de telefone</li>
                    </ul>
                </div>
                <div class="column">
                    <h4>Sprint 4 âœ…</h4>
                    <ul class="checklist">
                        <li>Fast-Track 30%/20%</li>
                        <li>PerpÃ©tua diferenciada por tipo de N1</li>
                        <li>BÃ´nus 3 implementado</li>
                        <li>Leadership 3%/4%</li>
                        <li>Royalty implementado</li>
                        <li>Dashboard de comissÃµes</li>
                        <li>Ledger auditÃ¡vel</li>
                    </ul>
                </div>
            </div>

            <div class="columns">
                <div class="column">
                    <h4>Sprint 5 âœ…</h4>
                    <ul class="checklist">
                        <li>SolicitaÃ§Ã£o de saque (PF e PJ)</li>
                        <li>ValidaÃ§Ã£o de saldo disponÃ­vel</li>
                        <li>Upload de NF-e (PJ)</li>
                        <li>GeraÃ§Ã£o de RPA (PF)</li>
                        <li>Limite mensal PF (R$1.000)</li>
                        <li>Valor mÃ­nimo R$100/saque</li>
                        <li>Net-15 (disponÃ­vel 15 dias apÃ³s virada)</li>
                        <li>Workflow de aprovaÃ§Ã£o admin</li>
                        <li>HistÃ³rico de saques</li>
                        <li>IntegraÃ§Ã£o Asaas definida</li>
                    </ul>
                </div>
                <div class="column">
                    <h4>Sprint 5 â€” Aguardando</h4>
                    <ul class="bullet">
                        <li>Credenciais Asaas para ativar pagamentos</li>
                    </ul>
                </div>
            </div>
        </section>

        <hr>

        <!-- Status Atual -->
        <section>
            <h1>ğŸ‰ Status Atual</h1>

            <div class="callout yellow">
                <span class="callout-icon">âš ï¸</span>
                <div class="callout-content">
                    <strong>Sprint 7 â€” PARCIAL (85%) | ğŸ‰ MVP COMPLETO</strong>
                    <p style="margin-top: 8px;"><strong>Data de atualizaÃ§Ã£o:</strong> 20/01/2026</p>
                    <p style="margin-top: 8px;"><strong>TBD-019 (Creatina):</strong> âœ… RESOLVIDO â€” Desconto 100% no pedido real</p>
                    <p style="margin-top: 8px;"><strong>PrÃ³ximo passo:</strong> Configurar Shopify Discount Function/Script para aplicar desconto automÃ¡tico</p>
                    <p style="margin-top: 8px;"><strong>Cobertura de FRs:</strong> 97% (37/38 + TBD-019 implementados)</p>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="page-footer">
            <p>Biohelp LRP â€” Resumo Executivo</p>
            <p>Ãšltima atualizaÃ§Ã£o: 20/01/2026</p>
        </footer>
    </div>
</body>
</html>
